# Техническое задание
Требования по подготовке к защите проекта
Представленные ниже требования обязательны к выполнению. Без реализации данных требований мы не сможем проверить вашу итоговую работу.

Студенты сдают только файлы проекта без node_modules. В противном случае вы просто не сможете загрузить архив на проверку.
Формат архива для отправки проекта Zip без сжатия (если формат архива будет не Zip или если он не распаковался — мы его не проверяем).
Если проект не запустился командами из сборки (фронтенд-часть) — проект проверить мы не сможем.
Формат именования архива id_студента-grading.zip, например, 0010203-grading.zip

## Технические требования

### Архитектура

Монолит или микросервисы на усмотрение студента. Помните, что выбирая микросервисную архитектуру, вам потребуется больше времени на решение задач.

Для разработки проекта используетя монорепозиторий. При этом применение монрепозитория является опциональным.
Тесты писать не нужно.

Для фронтенда рекомендуем использовать готовую сборку на основе Vite.

#### Backend:

- Node.js LTS

- Express.js

- Nest.js (опционален).

- TypeScript.

- MongoDB / PostgreSQL.

- ООП.

#### Frontend:
- React 18.

- TypeScript.

- Любые необходимые пакеты.


### 1. Общая задача
1.1. Разработать REST API-сервис для проекта «Guitar Shop». Сервис предоставляет API для создания, обновления и получения информации о товарах магазина.

1.2. Приложение предоставляет CLI для начального заполнения базы данных тестовыми данными.

1.3. Разработать фронтенд для проекта «Guitar Shop».

1.4. Интегрировать фронтенд и бэкенд.

### 2. Сценарии
2.1. Бэкенд
~~2.1.1. Создание нового пользователя.~~

2.1.2. Вход в закрытую часть приложения.

~~2.1.3. Проверка состояния пользователя.~~

2.1.4. Редактирование карточки товара.

~~2.1.5. Удаление товара.~~

2.1.6. Получение списка товаров. Применения фильтров в запросе.

~~2.1.7. Получение детальной информации по товару.~~

2.2. Фронтенд
2.2.1. Фронтенд предусматривает реализацию всех сценариев, описанных в разделе «Бэкенд». Вёрстка для всех состояний страниц предоставляется.

2.2.2. Список страниц

Страница «Вход» является главной страницей приложения. С неё начинается взаимодействие пользователя с сайтом.

Остальные страницы доступны только авторизованным пользователям, кроме страницы регистрации, страницы вход и страницы 404.

Если неавторизованный пользователь пытается обратиться к защищённой (приватной) странице, то выполняется перенаправление пользователя на страницу входа.

Страница «Карточка товара». На странице отображается детальная информация о товаре. Для перехода необходимо кликнуть на название товара в списке товаров.

Страница «Список товаров». На странице отображаются все товары магазина, а также элементы управления для создания, редактирования и удаления товаров.

Страница «Добавление нового товара». Страница позволяет создать новый товар. Пользователь может отказаться от создания товара нажав на кнопку «Вернуться к списку товаров». Нажатие на кнопку приводит к переходу на страницу «Список товаров».

Страница «Редактирование товара». На этой странице происходит редактирование информации о существующем товаре. При переходе на страницу редактирования товара она заполняется информацией о товаре.

Страница «404». Страница для демонстрации ошибок, например, «404».

Страница «Вход». На странице отображается форма для ввода логина и пароля. На странице предусмотрена валидация. Попытка отправить форму с незаполненными полями приводит к появлению ошибок «Заполните поле» (располагается возле поля). Информация об ошибках аутентификации также отображается в форме.

Страница «Регистрация». Страница с формой регистрации. На странице отображается форма для ввода логина и пароля. На странице предусмотрена валидация. Попытка отправить форму с незаполненными полями приводит к появлению ошибок «Заполните поле» (располагается возле поля). Информация с бэкенда также отображается в элементах, предусмотренных для вывода ошибок.

2.2.3. Элементы управления на страницах

На страницах представлены различные элементы интерфейса для управления управления контентом. Наличие элементов на определённой странице определяется макетом.

2.2.4. Список элементов интерфейса:

Пагинация. Применяется на страницах, где выводится различные списки. Например, список товаров. Пагинация содержит ссылки на очередные три (или меньше) страницы и кнопку «Далее». Нажатие на кнопку «Далее» приводит к переходу на следующую страницу. На этой странице вновь отображается пагинация с ссылками на очередные три страницы и кнопка «Далее». Если данных меньше, чем на три страницы, кнопка «Далее» не отображается.
Сортировка. Сортировка товаров может осуществляться по цене и дате. Направление сортировки (по возрастанию, по убыванию) задаётся кнопками с изображением стрелок (смотри макет). По умолчанию применяется сортировка по дате (по возрастанию).
Табы (вкладки). Элемент «Табы» отображается на странице «Карточка товара». Табов всегда два: «Характеристики» и «Описание». По умолчанию активна вкладка «Характеристики».
Хлебные крошки. Хлебные крошки отображаются на всех страницах кроме: «Регистрация», «Вход», «404». Хлебные крошки строятся от страницы «Вход». Например: «Вход» → «Текущая страница». Обратите внимание, все страницы подчинены «Вход».
Фильтры. Фильтры позволяют ограничивать выборку товаров по: цене (диапазон, «до» включительно), типу гитар (акустические, электрогитары, укулеле), количество струн.
Тип гитар определяется количеством струн: акустические (6, 7, 12 струн), электрогитары (4, 6, 7), укулеле (4).

Фильтр по цене работает следующим образом: нельзя ввести значения меньше 0, после загрузки в плейсхолдеры подставляется минимальная и максимальная цена (определяется по списку товаров).

Выбор одного из фильтров приводит к обновлению списка товаров с учётом выбранного фильтра. Для быстрого сброса фильтров предусмотрена кнопка «Очистить». Клик по кнопке отменяет выбранные фильтры, список товаров сразу обновляется.

### 3. Объекты предметной области
3.1. Пользователь
3.1.1. Пользователь представлен набором информации:

Имя. Обязательное. Минимальная длина 1 символ, максимальная длина 15 символов.
Электронная почта. Обязательное. Валидный адрес электронной почты. Уникальное (не может быть несколько пользователей с одинаковыми email).
Пароль. Обязательное. Минимальная длина 6 символов, максимальная длина 12 символов.
3.2. Товар
3.2.1. Товар представлен набором информации:

Наименование. Обязательное. Минимальная длина 10 символов, максимальная длина 100 символов.
Описание товара. Обязательное. Минимальная длина 20 символов, максимальная длина 1024 символа.
Дата добавления товара. Обязательное. По умолчанию — текущая дата.
Фотография товара. Обязательное. Формат: jpg, png.
Тип гитары. Обязательное. Один вариант из списка: электро, аккустика, укулеле.
Артикул. Обязательное. Минимальная длина 5 символов, максимальная 40 символов.
Количество струн. Обязательное. Один из вариантов: 4, 6, 7, 12.
Цена. Обязательное. Неотрицательное число в диапазоне от 100 до 1 000 000.
Уникальный идентификатор.
### 4. Функциональность
4.1. CLI
4.1.1. Приложение предоставляет CLI. Для запуска предусмотрен отдельный сценарий в package.json — cli.

4.1.2. Модуль, отвечающий за запуск CLI содержит корректный shebang.

4.1.3. CLI предоставляет команду --generate <n> <connection string> для заполнения базы данных начальными данными. n — количество тестовых товаров для формирования. Изображения товаров используются из макета. connection string — строка с параметрами для подключения к базе данных. Во время подготовки тестовых данных автоматически создаётся один пользователь — admin с паролем admin. Пользователь является администратором (ему доступны все ресурсы).

4.1.4. CLI предоставляет команду --help. Команда выводит информацию о доступных командах. Формат вывода остаётся на усмотрение студента.

4.1.5. Запуск CLI без аргументов приводит к выполнению команды --help.

4.2. REST API в формате OpenAPI
4.2.1. Приложение предоставляет REST API интерфейс. Имена ресурсов, маршрутов остаются на усмотрение студента.

4.2.2. Спецификация REST API представлена в формате OpenAPI.

4.2.3. Для описания спецификации используется язык YAML.

4.2.4. Спецификация сохранена в директории specification (в корне проекта).

4.3. REST API сервис
4.3.1. Сервис предоставляет ресурсы в соответствии со спецификацией (смотри пункт 4.2).

4.3.2. Настройки, необходимые для запуска и работы сервиса передаются с помощью переменных окружения.

4.3.3. Список всех переменных окружения приведён в файле readme.md, который расположен в корне проекта. Формат описания: PARAM=value — описание.

4.3.4. Для удобства передачи параметров окружения используются .env-файлы. Они не должны сохраняться в системе контроля версий.

4.3.5. В корне проекта расположен .env.example. Он содержит список всех переменных окружения, необходимых для работы приложения. Переменным заданы значения по умолчанию (для примера использования).

4.4. Запуск сервиса
4.4.1. При старте сервис проверяет список установленных переменных окружения. Если какая-то переменная не задана, сервис выдаёт сообщение об ошибке и прекращает выполнение. Сообщение содержит название переменной.

4.4.2. В файле readme.md предусмотрите раздел «Запуск проекта» и опишите в нём подробную инструкцию по запуску проекта.

4.4.3. В файле readme.md в секции «Сценарии» перечислите все сценарии, доступные в package.json и опишите их предназначение.

4.4.4. Запуск, установка внешних сервисов осуществляется через Docker. В корне приложения расположен docker-compose.yml.

### 5. Список ресурсов
Для всех ресурсов: детальную информацию по товару могут запрашивать авторизованные пользователи, кроме регистрации и входа на сайт.

5.1. Создание нового товара
5.1.1. Сервис предоставляет ресурс для создания новых карточек товаров.

5.1.2. Для создания новой карточки товара клиент передаёт всю информацию, указанную в описании сущности «Товар» (смотри пункт 3.2), кроме полей, которые рассчитываются автоматически.

5.1.3. Перед созданием новой карточки товара данные, полученные от клиента, валидируются. Если валидация не пройдена, сервис возвращает ошибку и корректный код состояния. Товар при этом не создаётся.

5.1.4. В случае успешного создания новой карточки товара, сервис в ответе возвращает информацию о созданном товаре (объект товара).

5.2. Редактирование товара
5.2.1. Сервис предоставляет ресурс для редактирования карточек товаров.

5.2.2. Для редактирования карточки товара клиент передаёт, указанный в пункте 3.2.1.

5.2.3. Полученные данные проходят валидацию. Если валидация не пройдена, сервис возвращает информацию об ошибке и корректный код состояния.

5.2.4. В случае успешного редактирования карточки товара, сервис возвращает клиенту обновлённый объект карточки товара.

5.3. Удаление товара
5.3.1. Сервис предоставляет ресурс для удаления карточек товаров.

5.4. Получение списка товаров
5.4.1. Сервис предоставляет ресурс для получения списка товаров.

5.4.2. По умолчанию сервис возвращает информацию о 7 товарах.

5.4.3. Получать список товаров могут авторизованные и неавторизованные клиенты.

5.4.4. Ресурс поддерживает постраничную навигацию. Каждая «страница» содержит 7 или оставшееся количество товаров (если их меньше 7).

5.4.5. Ресурс поддерживает фильтрацию: по типу гитар, по количеству струн. Клиент может выполнить запрос без указания фильтров.

5.4.6. Ресурс поддерживает сортировку. Клиент может передать информацию о желаемой сортировки списка товаров. Список товаров упорядочивается: по цене (убывание / возрастание), по дате добавления (сначала новые). Клиент может выполнить запрос без указания сортировки. В этом случае выполняется сортировка по умолчанию (по дате по возрастанию).

5.5. Получение детальной информации по товару
5.5.1. Сервис предоставляет ресурс для получения детальной информации по определённой карточки товара. Эта информация отображается на странице товара.

5.5.2. Информация по товару содержит все поля перечисленные в пункте 3.2.1.

5.6. Создание нового пользователя (фактически другого администратора)
5.6.1. Сервис предоставляет ресурс для создания нового пользователя. Создавая каждого нового пользователя он фактически будет являться администратором. Наличие другой роли для закрытой части приложения в данном проекте не предусмотрено.

5.6.2. Для создания нового пользователя клиент отправляет запрос и передаёт данные, указанные в пункте 3.1.

5.6.3. Создавать новых пользователей могут анонимные клиенты.

5.6.4. Email создаваемого пользователя уникальный. В системе не может быть двух пользователей с одинаковым email.

5.6.5. Данные, полученные от клиента проходят валидацию. Если проверка не пройдена, сервер возвращает ошибку и корректный код состояния.

5.6.6. В случае успешного создания пользователя, сервис возвращает информацию о созданном пользователе (объект пользователя). Возвращаемая информация не содержит конфиденциальных данных.

5.6.7. Пароль пользователя не хранится в базе данных в открытом виде. Вместо этого хранится хеш пароля.

5.6.8. В случае успешного создания пользователя сервис отправляет на email созданного пользователя детальную информацию: ссылку на вход в закрытую часть приложения, логин и пароль.

5.7. Вход в закрытую часть приложения
5.7.1. Сервис предоставляет ресурс для аутентификации и авторизации пользователя.

5.7.2. Для входа в закрытую часть приложения клиент передаёт логин (email) и пароль пользователя.

5.7.3. Если логин или пароль неверный, или пользователь не существует, сервер возвращает ошибку и соответствующий код состояния.

5.7.4. В случае успешной проверки логина и пароля, сервис возвращает клиенту токен авторизации.

5.7.5. Клиент использует этот токен для отправки любых запросов. Токен передаётся в заголовках.

5.8. Проверка состояния пользователя
5.8.1. Сервис предоставляет ресурс для проверки состояния клиента — авторизован или нет.

5.8.2. Проверка состояния клиента производится на основании токена.

5.8.3. Если клиент авторизован, сервис возвращает соответствующий код состояния и информацию о пользователе (смотри пункт 3.1). Информация о пользователе не должна содержать конфиденциальные данные (пароль).

### 6. Валидация
6.1. Данные, полученные от клиента проверяются перед использованием (приводятся к нужному типу, проверяются идентификаторы для связанных сущностей и так далее).

6.2. Данные, которые не удовлетворяют правилам валидации не могут использоваться для создания или редактирования сущностей. В таких ситуациях сервис возвращает ошибку и соответствующий код состояния.

### 7. Ошибки
7.1. В случае невозможности выполнения запроса, сервис возвращает клиенту список ошибок. Ответ с ошибкой содержит описание ошибки и соответствующий код состояния.

7.2. Формат описания ошибок и их детализация остаются на усмотрение студента.

7.3. Все ошибки должны логироваться.
